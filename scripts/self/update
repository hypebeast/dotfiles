  #!/usr/bin/env bash

####
## Based on CodelyTV/dotfiles
####

set -euo pipefail

source "$DOTFILES/scripts/core/_main.sh"
source "$DOTFILES/scripts/self/utils/update.sh"

##? Updates submodules, dotfiles and attempts to do some setup
#?? 1.0.0
##?
##? Usage:
##?    update

docs::eval_help "$@"

log::note "Updating dotfiles"
self_update

log::note "Updating submodules"
update_submodules

log::note "Applying common symlinks"
apply_common_symlinks

if platform::is_macos; then
  log::note "Applying macOS symlinks"
  apply_macos_symlinks
fi

if platform::is_linux; then
  log::note "Applying Linux symlinks"
  apply_linux_symlinks
fi
